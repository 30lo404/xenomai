<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Xenomai: Sched</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
</script>
<link rel="search" href="search-opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Xenomai"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Xenomai
   &#160;<span id="projectnumber">2.99.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.php" method="get">
              <img id="MSearchSelect" src="search/mag.png" alt=""/>
              <input type="text" id="MSearchField" name="query" value="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__sched.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Sched</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:include_2cobalt_2kernel_2sched_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2cobalt_2kernel_2sched_8h.html">sched.h</a></td></tr>
<tr class="memdesc:include_2cobalt_2kernel_2sched_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scheduler interface header. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structxnsched.html">xnsched</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scheduling information structure.  <a href="structxnsched.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga40473b47b4871fa538a0fa131f94e774"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sched.html#ga40473b47b4871fa538a0fa131f94e774">CREATE_TRACE_POINTS</a></td></tr>
<tr class="memdesc:ga40473b47b4871fa538a0fa131f94e774"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copyright (C) 2001-2013 Philippe Gerum <a href="#" onclick="location.href='mai'+'lto:'+'rpm'+'@x'+'eno'+'ma'+'i.o'+'rg'; return false;">rpm@x<span style="display: none;">.nosp@m.</span>enom<span style="display: none;">.nosp@m.</span>ai.or<span style="display: none;">.nosp@m.</span>g</a>.  <a href="#ga40473b47b4871fa538a0fa131f94e774">More...</a><br/></td></tr>
<tr class="separator:ga40473b47b4871fa538a0fa131f94e774"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab51b1711cd73d890278e3998c817cc3a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sched.html#gab51b1711cd73d890278e3998c817cc3a">xnsched_run</a> (void)</td></tr>
<tr class="memdesc:gab51b1711cd73d890278e3998c817cc3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The rescheduling procedure.  <a href="#gab51b1711cd73d890278e3998c817cc3a">More...</a><br/></td></tr>
<tr class="separator:gab51b1711cd73d890278e3998c817cc3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4cb702f4a99401c3c1c73811f55e990f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sched.html#ga4cb702f4a99401c3c1c73811f55e990f">xnsched_rotate</a> (struct <a class="el" href="structxnsched.html">xnsched</a> *sched, struct xnsched_class *sched_class, const union xnsched_policy_param *sched_param)</td></tr>
<tr class="memdesc:ga4cb702f4a99401c3c1c73811f55e990f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rotate a scheduler runqueue.  <a href="#ga4cb702f4a99401c3c1c73811f55e990f">More...</a><br/></td></tr>
<tr class="separator:ga4cb702f4a99401c3c1c73811f55e990f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0c957ba4f4c116aa2bd44b6ce9717510"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sched.html#ga0c957ba4f4c116aa2bd44b6ce9717510">xnsched_rt_init</a> (struct <a class="el" href="structxnsched.html">xnsched</a> *sched)</td></tr>
<tr class="memdesc:ga0c957ba4f4c116aa2bd44b6ce9717510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copyright (C) 2008 Philippe Gerum <a href="#" onclick="location.href='mai'+'lto:'+'rpm'+'@x'+'eno'+'ma'+'i.o'+'rg'; return false;">rpm@x<span style="display: none;">.nosp@m.</span>enom<span style="display: none;">.nosp@m.</span>ai.or<span style="display: none;">.nosp@m.</span>g</a>.  <a href="#ga0c957ba4f4c116aa2bd44b6ce9717510">More...</a><br/></td></tr>
<tr class="separator:ga0c957ba4f4c116aa2bd44b6ce9717510"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga40473b47b4871fa538a0fa131f94e774"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CREATE_TRACE_POINTS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copyright (C) 2001-2013 Philippe Gerum <a href="#" onclick="location.href='mai'+'lto:'+'rpm'+'@x'+'eno'+'ma'+'i.o'+'rg'; return false;">rpm@x<span style="display: none;">.nosp@m.</span>enom<span style="display: none;">.nosp@m.</span>ai.or<span style="display: none;">.nosp@m.</span>g</a>. </p>
<p>Xenomai is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>Xenomai is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with Xenomai; if not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga4cb702f4a99401c3c1c73811f55e990f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void xnsched_rotate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxnsched.html">xnsched</a> *&#160;</td>
          <td class="paramname"><em>sched</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct xnsched_class *&#160;</td>
          <td class="paramname"><em>sched_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const union xnsched_policy_param *&#160;</td>
          <td class="paramname"><em>sched_param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rotate a scheduler runqueue. </p>
<p>The specified scheduling class is requested to rotate its runqueue for the given scheduler. Rotation is performed according to the scheduling parameter specified by <em>sched_param</em>.</p>
<dl class="section note"><dt>Note</dt><dd>The nucleus supports round-robin scheduling for the members of the RT class.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sched</td><td>The per-CPU scheduler hosting the target scheduling class.</td></tr>
    <tr><td class="paramname">sched_class</td><td>The scheduling class which should rotate its runqueue.</td></tr>
    <tr><td class="paramname">sched_param</td><td>The scheduling parameter providing rotation information to the specified scheduling class.</td></tr>
  </table>
  </dd>
</dl>
<p>Environments:</p>
<p>This service should be called from:</p>
<ul>
<li>Kernel-based task</li>
<li>Interrupt service routine</li>
<li>User-space task (primary mode only)</li>
</ul>
<p>Rescheduling: never. </p>

</div>
</div>
<a class="anchor" id="ga0c957ba4f4c116aa2bd44b6ce9717510"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void xnsched_rt_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structxnsched.html">xnsched</a> *&#160;</td>
          <td class="paramname"><em>sched</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copyright (C) 2008 Philippe Gerum <a href="#" onclick="location.href='mai'+'lto:'+'rpm'+'@x'+'eno'+'ma'+'i.o'+'rg'; return false;">rpm@x<span style="display: none;">.nosp@m.</span>enom<span style="display: none;">.nosp@m.</span>ai.or<span style="display: none;">.nosp@m.</span>g</a>. </p>
<p>Xenomai is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>Xenomai is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with Xenomai; if not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA. </p>

<p>References <a class="el" href="structxnsched.html#a0890af51db917d0e6c02d1ff487daad5">xnsched::rt</a>.</p>

</div>
</div>
<a class="anchor" id="gab51b1711cd73d890278e3998c817cc3a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int xnsched_run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The rescheduling procedure. </p>
<p>This is the central rescheduling routine which should be called to validate and apply changes which have previously been made to the nucleus scheduling state, such as suspending, resuming or changing the priority of threads. This call performs context switches as needed. <a class="el" href="group__sched.html#gab51b1711cd73d890278e3998c817cc3a" title="The rescheduling procedure. ">xnsched_run()</a> schedules out the current thread if:</p>
<ul>
<li>the current thread is about to block.</li>
<li>a runnable thread from a higher priority scheduling class is waiting for the CPU.</li>
<li>the current thread does not lead the runnable threads from its own scheduling class (i.e. round-robin).</li>
</ul>
<p>The Cobalt core implements a lazy rescheduling scheme so that most of the services affecting the threads state MUST be followed by a call to the rescheduling procedure for the new scheduling state to be applied.</p>
<p>In other words, multiple changes on the scheduler state can be done in a row, waking threads up, blocking others, without being immediately translated into the corresponding context switches. When all changes have been applied, <a class="el" href="group__sched.html#gab51b1711cd73d890278e3998c817cc3a" title="The rescheduling procedure. ">xnsched_run()</a> should be called for considering those changes, and possibly switching context.</p>
<p>As a notable exception to the previous principle however, every action which ends up suspending the current thread begets an implicit call to the rescheduling procedure on behalf of the blocking service.</p>
<p>Typically, self-suspension or sleeping on a synchronization object automatically leads to a call to the rescheduling procedure, therefore the caller does not need to explicitly issue <a class="el" href="group__sched.html#gab51b1711cd73d890278e3998c817cc3a" title="The rescheduling procedure. ">xnsched_run()</a> after such operations.</p>
<p>The rescheduling procedure always leads to a null-effect if it is called on behalf of an interrupt service routine. Any outstanding scheduler lock held by the outgoing thread will be restored when the thread is scheduled back in.</p>
<p>Calling this procedure with no applicable context switch pending is harmless and simply leads to a null-effect.</p>
<dl class="section return"><dt>Returns</dt><dd>Non-zero is returned if a context switch actually happened, otherwise zero if the current thread was left running.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Tags: none. </dd></dl>

<p>References <a class="el" href="structxnsched.html#afacfa3137dcabf83d2351fa27407164d">xnsched::lflags</a>, and <a class="el" href="structxnsched.html#ad132581bc8d5df9af99f5ab7b1cadd48">xnsched::status</a>.</p>

<p>Referenced by <a class="el" href="group__cobalt__thread.html#ga023e824df57ad2d88d42bb6e4c6711f3">pthread_set_mode_np()</a>, <a class="el" href="group__cobalt__thread.html#gacab388c790e2282cb0379df8a6de292a">pthread_setschedparam_ex()</a>, <a class="el" href="group__rtdm__sync.html#ga1217402b82034b26fe25c26f1e5b32c9">rtdm_event_signal()</a>, <a class="el" href="group__rtdm__sync.html#gab40ed579324d8cc76387a0e06dd0f82a">rtdm_mutex_unlock()</a>, <a class="el" href="group__rtdm__sync.html#ga829dbd8c5709d798ed06947b27001fed">rtdm_sem_up()</a>, <a class="el" href="group__core__registry.html#ga28aefd9be7367aa495753142005e1d5a">xnregistry_enter()</a>, <a class="el" href="group__core__select.html#ga8546a4a6f997a8c29451673d5b7f0e86">xnselect_bind()</a>, <a class="el" href="group__core__select.html#ga56e4b5bf3e35dd80c23e95cad8fa1614">xnselect_destroy()</a>, <a class="el" href="group__core__thread.html#gabcf46b2b38ac68322f354adc408c2732">xnthread_cancel()</a>, <a class="el" href="group__core__thread.html#gabedfb90d24b08db04e49b168d290e032">xnthread_start()</a>, and <a class="el" href="group__core__thread.html#gaab49f7e0bb3c3ede3d52a47ee18794bc">xnthread_suspend()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
